# 第十一节：引入第三方类

## 为什么引入

我们知道，我们并不能够独立完成所有的东西，或限于时间，或限于精力，或限于能力，总之，如果有别人替你做了这件事，那么何乐而不为？但说到理由，有如下几个：

1. 稳定可靠，接口规范。如果之前已经有人使用过这个东西，那么这个东西一定被证明是可用的，一般情况下，这些类都保持着接口规范和干净。
2. 有人给你做维护。一般情况下，这些开源的类都有人维护，有些情况，别人遇到的bug也会尽快被修复，因此，在有些时候，你就无需去踩那些你不知道的坑。
3. 相互贡献。既然你占了别人便宜，那么也想想如何让别人也占占便宜，虽然这不是你必须要做的，但是，回馈社会这是一个绝佳的机会。你要做的仅仅是：遇到bug，反馈；如果更近一步，可以分析bug产生的原因，以及，修复它。

## 引入考虑哪些因素

引入一个新的类时，也就意味着你们要它要合你的其它的类共存一个生态环境。理论上，如果大家都保持一致的规范，那么就完美了。可惜，并不是所有人都有一致的标准。因此，一个类是否能够引入，如何引入可能都需要一些条件。

1. 是否由类名、函数名、常量、全局变量等冲突。一般的类都不会破坏PHP运行环境，这种情况一般都会使用“包”（package）这个概念。PHP5.3之前没有包，那么我们就会使用前缀。缺点是它会破坏PHP运行环境。不过，如果我们使用前缀标记，那么很少会有冲突。
2. 是否由注册钩子行为。例如：autoload、register_shutdown_function、register_tick_function、错误处理（error、exception）、缓冲输出等，如果有，请先确定是否符合预期；
3. 是否稳定，是否已证明可用。一般情况下，我会先搜索一下这个类库，以判断它是否流行。如果不流行，那么我可能会尝试阅读其源码，了解其实现原理。
4. 是否方便跟着升级。

## 实践

1. 引入Smarty
2. 检查常量、autoload
3. 中介（代理）类
4. 测试
5. 处理升级和更新